### **工程设计文档：对话式 AI 风格建议**

#### **1. 目标**

重构 `app/chat/page.tsx` 中的聊天界面，将 AI 的风格建议从一个单一的文本块拆分成一系列独立的、顺序发送的消息。这将创造一个更具吸引力和参与感的对话式体验。

#### **2. 前端变更 (`app/chat/page.tsx`)**

*   **新增异步显示函数**: 我将在 `ChatPage` 组件内部创建一个新的 `async` 辅助函数。此函数的目标是管理风格建议消息的顺序显示。

*   **顺序消息逻辑**:
    1.  该函数将从后端 API 接收完整的 `suggestion` 对象。
    2.  它将包含一个预定义的建议类别列表（如 `scene_fit`, `style_alignment` 等），以及用户友好的标题和表情符号（例如，"🎯 场合适配度"，"👗 风格搭配建议"）。这确保了建议总是以一致且合乎逻辑的顺序显示。
    3.  然后，函数将遍历此列表。对于每一个建议类别：
        *   它会为该特定点在对话中添加一个新的、独立的聊天气泡。
        *   然后它会**短暂地暂停**（例如，1.2秒）。这种延迟模拟了 AI"正在输入"的感觉，使得交互更加动态，而不像一个静态的数据转储。
    4.  在所有建议点都逐一显示完毕后，该函数将自动添加一个最终的"加载中"气泡（例如，"AI正在生成你的专属造型图片..."），以平滑地将用户过渡到下一个步骤。

*   **轮询处理器修改**:
    *   我将更新 `startPolling` 函数。当前处理 `suggestion_generated` 状态的逻辑将被替换。
    *   它将不再将整个建议格式化为一个大的消息，而是会调用新的顺序显示函数。

#### **3. 日志增强**

根据你的要求，我将添加新的 `console.log` 语句，以提供对此过程的完全可见性：
*   当从 API 收到完整的 `suggestion` 对象时，将打印一条日志。
*   对于正在显示的每个单独的聊天气泡，将有一条日志指示正在渲染哪个具体的建议（例如，`[CHAT UI] Displaying bubble: 风格搭配建议`）。
*   最后一条日志将确认所有建议气泡都已渲染完毕，并且流程正在进入图像生成阶段。

这个设计将提供你所期望的对话流程，并提供监控该功能行为所需的详细日志。

