# AI 服务成本估算

本文档旨在记录和分析项目中使用的各项 AI 服务的成本，以便进行预算管理和成本优化。

## 1. OpenAI GPT-4o API 调用成本

这是我们核心的 AI 聊天和风格建议服务的成本分析。

### 1.1. 定价模型

我们使用的模型是 `gpt-4o`，其官方 API 定价如下（截至2024年）：

- **输入 (Prompt) Tokens:** **$5.00** / 每 1,000,000 Tokens
- **输出 (Completion) Tokens:** **$15.00** / 每 1,000,000 Tokens

### 1.2. 单次请求成本估算

根据一次典型的用户交互日志，我们得到以下数据：

- **输入 Tokens:** `2,117`
- **输出 Tokens:** `1,959`

根据这些数据，我们可以进行成本计算：

#### 输入成本 (Prompt Cost)

- **计算:** `(2,117 / 1,000,000) * $5.00`
- **结果:** **$0.010585**

#### 输出成本 (Completion Cost)

- **计算:** `(1,959 / 1,000,000) * $15.00`
- **结果:** **$0.029385**

---

#### **单次请求总成本**

```
$0.010585 (输入) + $0.029385 (输出) = $0.03997
```

因此，处理一次完整的用户请求，成本约为 **$0.04**（4 美分）。

### 1.3. 成本分析

- **主要成本来源**: 输出 Token 的成本是输入 Token 的3倍，占了单次总成本的 **~73%**。这意味着AI生成内容的长度是成本控制的关键。
- **System Prompt**: 我们的系统提示词（`systemPrompt`）长度约为 1,371 Tokens，是输入成本的主要部分。未来如果需要优化，可以在保证效果的前提下精简这部分内容。

### 1.4. 未来成本预测

基于单次请求约 **$0.04** 的成本，我们可以预测未来的运营开销：

- **处理 100 次用户请求:** 约 **$4.00**
- **处理 1,000 次用户请求:** 约 **$40.00**
- **处理 10,000 次用户请求:** 约 **$400.00**

## 2. Kling AI 图像生成成本

*(待补充...)*

*(此处可以添加关于 Kling AI 图像生成或处理服务的成本分析)*
