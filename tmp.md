
styleme 页面加入STEP 5. 选择生成模式
- 模式1 tryon only
- 模式2 简单场景生成
- 模式3 高级场景生成
不同的模式对应不同的流水线，使得用户有不同的选择
流水线有三个阶段 一 准备阶段； 二 生成阶段； 三 收尾阶段； 在不同的模式中第一，第三阶段保持一致 不同的是第二阶段

**流水线步骤如下:**
1 准备阶段

1.1 **准备阶段 (1/7)**
    - **任务**: 将传入的图片URL（比如用户头像和服装图）转换为`File`对象。
1.2 **获取风格化所需数据 (2/7)**
    - **任务**: 将用户的原始照片转换为`Base64`编码的字符串。

2 生成阶段
2.1 tryon only
    2.1.1.  **虚拟试穿** 🌟
    - **任务**: 调用`kolors-virtual-try-on`模型，将“服装”图片“穿”到“画布”图片上。
    - **进度更新**: 将虚拟试穿结果图的URL也保存到KV数据库。下一步直接收尾阶段
2.2 简单场景生成
    2.2.1.  **AI生成：风格化** 🌟
    - **任务**: 调用`kling-v1-5`模型，将用户的**原始照片**和`imagePrompt`结合，生成一张包含**新背景和姿态**的图片。
    - **进度更新**: 将生成的风格化图片URL保存到KV数据库，以便追踪进度。下一步直接收尾阶段
2.3 高级场景生成
  2.3.1 **第一层AI生成：风格化 (3/7)** 🌟
    - **任务**: 调用`kling-v2`模型，将用户的**原始照片**和`imagePrompt`结合，生成一张包含**新背景和姿态**的图片。
    - **进度更新**: 将生成的风格化图片URL保存到KV数据库，以便追踪进度。

  2.3.2  **准备虚拟试穿数据 (4/7)**
    - **任务**: 将上一步生成的“画布”图片和用户选择的“服装”图片都转换为`Base64`格式。
  2.3.3 **第二层AI生成：虚拟试穿 (5/7)** 🌟
    - **任务**: 调用`kolors-virtual-try-on`模型，将“服装”图片“穿”到“画布”图片上。
    - **关键点**: 这时我们得到了一张人穿着衣服、背景也换了的图片，但**脸是AI生成的，不是用户本人的**。
    - **进度更新**: 将虚拟试穿结果图的URL也保存到KV数据库。

  2.3.4 **第三层AI生成：换脸 (6/7)** 🌟
    - **任务**: 调用第三方**换脸API** (`faceSwap`)。
    - **源(Source)**: 用户的**原始照片**（提供脸）。
    - **目标(Target)**: 上一步生成的**虚拟试穿图**（提供身体和背景）。
    - **结果**: 生成一张最终图片，它拥有风格化的背景、正确的服装，以及用户自己的脸。
    - **进度更新**: 更新KV状态，告知换脸已开始/完成。

三 收尾阶段
7. **收尾阶段 (7/7)**
    - **任务**: 将最终生成的图片上传到Vercel Blob云存储中，获取一个永久、安全的URL。